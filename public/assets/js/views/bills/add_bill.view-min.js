function showItemSelectModal(){let t=$("#modal_select_bill_item");$("#btn_open_modal_add_item").on("click",function(){t.modal("show")})}function findItemById(t,e){for(let l=0;l<t.length;l++)if(t[l].id===e)return t[l];return null}function searchForItems(t,e){let l=$("#field_search_items");$("#btn_search_items").on("click",function(){let o=l.val().trim();$.get(`${getSiteUrl()}/items/search`,{keyword:o}).done(function(l){buildSearchResultsTableContent(l.data,t,e)}).fail(function(t){console.log(t.responseJSON.data)})})}function buildSearchResultsTableContent(t,e,l){e.rows().remove(),t.forEach(t=>{e.row.add([`<button class="btn btn-sm btn-primary btn_add_selected_item" data-id="${t.id}">Insert</button>`,t.item_name,t.description,t.category_name,t.gold_quality,t.weight,t.stock_price_string,t.quantity]).draw()}),addItemToTheBill(t,l)}function addItemToTheBill(t,e){$(".btn_add_selected_item").on("click",function(){let l=$(this).attr("data-id"),o=findItemById(t,l);null!=o&&(selectedItems.push(o),showSuccessToast(`${o.item_name} added successfully`),updateBillTable(e))})}function updateBillTable(t){t.rows().remove().draw(),selectedItems.forEach(e=>{t.row.add([e.item_name,'<input type="text" class="form-control form-control-sm text-right" value="1">',`<input type="text" class="form-control form-control-sm text-right" placeholder="${e.stock_price}" value="${e.stock_price}">`,'<input type="text" class="form-control form-control-sm text-right" value="">',`<button class="btn btn-sm btn-warning btn_remove_selected_item" data-id="${e.id}">Remove</button>`]).draw()}),$(".btn_remove_selected_item").on("click",function(){let e=$(this).attr("data-id");console.log("id: "+e),selectedItems=selectedItems.filter(function(t){return t.id!==e}),console.log(selectedItems),updateBillTable(t)})}let selectedItems=[];$(function(){let t=$("#dt_search_bill_items").DataTable({columnDefs:[{className:"text-right align-middle",targets:"_all"}]}),e=$("#dt_bill_items").DataTable({columnDefs:[{className:"text-right align-middle",targets:"_all"}]});showItemSelectModal(),searchForItems(t,e)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJpbGxzL2FkZF9iaWxsLnZpZXcuanMiXSwibmFtZXMiOlsic2hvd0l0ZW1TZWxlY3RNb2RhbCIsIm1vZGFsSXRlbVNlbGVjdCIsIiQiLCJvbiIsIm1vZGFsIiwiZmluZEl0ZW1CeUlkIiwiZGF0YSIsImlkIiwiaSIsImxlbmd0aCIsInNlYXJjaEZvckl0ZW1zIiwic2VhcmNoVGFibGUiLCJiaWxsVGFibGUiLCJmaWVsZFNlYXJjaCIsInR4dFNlYXJjaCIsInZhbCIsInRyaW0iLCJnZXQiLCJnZXRTaXRlVXJsIiwia2V5d29yZCIsImRvbmUiLCJyZXNwb25zZSIsImJ1aWxkU2VhcmNoUmVzdWx0c1RhYmxlQ29udGVudCIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2VKU09OIiwicm93cyIsInJlbW92ZSIsImZvckVhY2giLCJpdGVtIiwicm93IiwiYWRkIiwiaXRlbV9uYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeV9uYW1lIiwiZ29sZF9xdWFsaXR5Iiwid2VpZ2h0Iiwic3RvY2tfcHJpY2Vfc3RyaW5nIiwicXVhbnRpdHkiLCJkcmF3IiwiYWRkSXRlbVRvVGhlQmlsbCIsInRoaXMiLCJhdHRyIiwic2VsZWN0ZWRJdGVtIiwic2VsZWN0ZWRJdGVtcyIsInB1c2giLCJzaG93U3VjY2Vzc1RvYXN0IiwidXBkYXRlQmlsbFRhYmxlIiwic3RvY2tfcHJpY2UiLCJmaWx0ZXIiLCJ2YWx1ZSIsImRUU2VhcmNoSXRlbXMiLCJEYXRhVGFibGUiLCJjb2x1bW5EZWZzIiwiY2xhc3NOYW1lIiwidGFyZ2V0cyIsImRUQmlsbEl0ZW1zIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxzQkFFTCxJQUFJQyxFQUFrQkMsRUFBRSwyQkFDS0EsRUFBRSw0QkFFUkMsR0FBRyxRQUFTLFdBQy9CRixFQUFnQkcsTUFBTSxVQU85QixTQUFTQyxhQUFhQyxFQUFNQyxHQUN4QixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUYsRUFBS0csT0FBUUQsSUFDN0IsR0FBSUYsRUFBS0UsR0FBR0QsS0FBT0EsRUFDZixPQUFPRCxFQUFLRSxHQUVwQixPQUFPLEtBSVgsU0FBU0UsZUFBZUMsRUFBYUMsR0FFakMsSUFBSUMsRUFBY1gsRUFBRSx1QkFDSkEsRUFBRSxxQkFFUkMsR0FBRyxRQUFTLFdBRWxCLElBQUlXLEVBQVlELEVBQVlFLE1BQU1DLE9BRWxDZCxFQUFFZSxPQUFPQyw0QkFBNkIsQ0FDbENDLFFBQVNMLElBQ1ZNLEtBQUssU0FBVUMsR0FFZEMsK0JBQStCRCxFQUFTZixLQUFNSyxFQUFhQyxLQUU1RFcsS0FBSyxTQUFVRixHQUNkRyxRQUFRQyxJQUFJSixFQUFTSyxhQUFhcEIsVUFTOUMsU0FBU2dCLCtCQUErQmhCLEVBQU1LLEVBQWFDLEdBR3ZERCxFQUFZZ0IsT0FBT0MsU0FFbkJ0QixFQUFLdUIsUUFBUUMsSUFHVG5CLEVBQVlvQixJQUFJQyxJQUFJLDBFQUN5REYsRUFBS3ZCLHNCQUM5RXVCLEVBQUtHLFVBQ0xILEVBQUtJLFlBQ0xKLEVBQUtLLGNBQ0xMLEVBQUtNLGFBQ0xOLEVBQUtPLE9BQ0xQLEVBQUtRLG1CQUNMUixFQUFLUyxXQUNOQyxTQUlQQyxpQkFBaUJuQyxFQUFNTSxHQU0zQixTQUFTNkIsaUJBQWlCbkMsRUFBTU0sR0FDNUJWLEVBQUUsMEJBQTBCQyxHQUFHLFFBQVMsV0FFcEMsSUFBSUksRUFBS0wsRUFBRXdDLE1BQU1DLEtBQUssV0FFbEJDLEVBQWV2QyxhQUFhQyxFQUFNQyxHQUVsQixNQUFoQnFDLElBQ0FDLGNBQWNDLEtBQUtGLEdBRW5CRyxvQkFBb0JILEVBQWFYLGdDQUVqQ2UsZ0JBQWdCcEMsTUFXNUIsU0FBU29DLGdCQUFnQnBDLEdBR3JCQSxFQUFVZSxPQUFPQyxTQUFTWSxPQUUxQkssY0FBY2hCLFFBQVFDLElBRWxCbEIsRUFBVW1CLElBQUlDLElBQUksQ0FDZEYsRUFBS0csVUFDTCxtS0FDbUZILEVBQUttQix1QkFBdUJuQixFQUFLbUIsZ0JBQ3BILDJKQUM0RW5CLEVBQUt2Qix3QkFDbEZpQyxTQUtQdEMsRUFBRSw2QkFBNkJDLEdBQUcsUUFBUyxXQUN2QyxJQUFJSSxFQUFLTCxFQUFFd0MsTUFBTUMsS0FBSyxXQUV0Qm5CLFFBQVFDLElBQUksT0FBU2xCLEdBRXJCc0MsY0FBZ0JBLGNBQWNLLE9BQU8sU0FBVUMsR0FDM0MsT0FBT0EsRUFBTTVDLEtBQU9BLElBR3hCaUIsUUFBUUMsSUFBSW9CLGVBRVpHLGdCQUFnQnBDLEtBUXhCLElBQUlpQyxjQUFnQixHQUVwQjNDLEVBQUUsV0FFRSxJQUFJa0QsRUFBZ0JsRCxFQUFFLHlCQUF5Qm1ELFVBQVUsQ0FDckRDLFdBQWMsQ0FDVixDQUFDQyxVQUFXLDBCQUEyQkMsUUFBVyxXQUl0REMsRUFBY3ZELEVBQUUsa0JBQWtCbUQsVUFBVSxDQUM1Q0MsV0FBYyxDQUNWLENBQUNDLFVBQVcsMEJBQTJCQyxRQUFXLFdBSzFEeEQsc0JBQ0FVLGVBQWUwQyxFQUFlSyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNob3dJdGVtU2VsZWN0TW9kYWwoKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsSXRlbVNlbGVjdCA9ICQoXCIjbW9kYWxfc2VsZWN0X2JpbGxfaXRlbVwiKTtcclxuICAgIGxldCBidG5PcGVuTW9kYWxJdGVtU2VsZWN0ID0gJChcIiNidG5fb3Blbl9tb2RhbF9hZGRfaXRlbVwiKTtcclxuXHJcbiAgICBidG5PcGVuTW9kYWxJdGVtU2VsZWN0Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1vZGFsSXRlbVNlbGVjdC5tb2RhbChcInNob3dcIik7XHJcbiAgICB9KTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZmluZEl0ZW1CeUlkKGRhdGEsIGlkKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZGF0YVtpXS5pZCA9PT0gaWQpXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhW2ldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hGb3JJdGVtcyhzZWFyY2hUYWJsZSwgYmlsbFRhYmxlKSB7XHJcblxyXG4gICAgbGV0IGZpZWxkU2VhcmNoID0gJChcIiNmaWVsZF9zZWFyY2hfaXRlbXNcIik7XHJcbiAgICBsZXQgYnRuU2VhcmNoID0gJChcIiNidG5fc2VhcmNoX2l0ZW1zXCIpO1xyXG5cclxuICAgIGJ0blNlYXJjaC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgbGV0IHR4dFNlYXJjaCA9IGZpZWxkU2VhcmNoLnZhbCgpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgJC5nZXQoYCR7Z2V0U2l0ZVVybCgpfS9pdGVtcy9zZWFyY2hgLCB7XHJcbiAgICAgICAgICAgIGtleXdvcmQ6IHR4dFNlYXJjaFxyXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgICAgICBidWlsZFNlYXJjaFJlc3VsdHNUYWJsZUNvbnRlbnQocmVzcG9uc2UuZGF0YSwgc2VhcmNoVGFibGUsIGJpbGxUYWJsZSk7XHJcblxyXG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnJlc3BvbnNlSlNPTi5kYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYnVpbGRTZWFyY2hSZXN1bHRzVGFibGVDb250ZW50KGRhdGEsIHNlYXJjaFRhYmxlLCBiaWxsVGFibGUpIHtcclxuXHJcblxyXG4gICAgc2VhcmNoVGFibGUucm93cygpLnJlbW92ZSgpO1xyXG5cclxuICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuXHJcblxyXG4gICAgICAgIHNlYXJjaFRhYmxlLnJvdy5hZGQoW1xyXG4gICAgICAgICAgICBgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXByaW1hcnkgYnRuX2FkZF9zZWxlY3RlZF9pdGVtXCIgZGF0YS1pZD1cIiR7aXRlbS5pZH1cIj5JbnNlcnQ8L2J1dHRvbj5gLFxyXG4gICAgICAgICAgICBpdGVtLml0ZW1fbmFtZSxcclxuICAgICAgICAgICAgaXRlbS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgaXRlbS5jYXRlZ29yeV9uYW1lLFxyXG4gICAgICAgICAgICBpdGVtLmdvbGRfcXVhbGl0eSxcclxuICAgICAgICAgICAgaXRlbS53ZWlnaHQsXHJcbiAgICAgICAgICAgIGl0ZW0uc3RvY2tfcHJpY2Vfc3RyaW5nLFxyXG4gICAgICAgICAgICBpdGVtLnF1YW50aXR5LFxyXG4gICAgICAgIF0pLmRyYXcoKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBhZGRJdGVtVG9UaGVCaWxsKGRhdGEsIGJpbGxUYWJsZSk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZEl0ZW1Ub1RoZUJpbGwoZGF0YSwgYmlsbFRhYmxlKSB7XHJcbiAgICAkKFwiLmJ0bl9hZGRfc2VsZWN0ZWRfaXRlbVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XHJcblxyXG4gICAgICAgIGxldCBzZWxlY3RlZEl0ZW0gPSBmaW5kSXRlbUJ5SWQoZGF0YSwgaWQpO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5wdXNoKHNlbGVjdGVkSXRlbSk7XHJcblxyXG4gICAgICAgICAgICBzaG93U3VjY2Vzc1RvYXN0KGAke3NlbGVjdGVkSXRlbS5pdGVtX25hbWV9IGFkZGVkIHN1Y2Nlc3NmdWxseWApO1xyXG5cclxuICAgICAgICAgICAgdXBkYXRlQmlsbFRhYmxlKGJpbGxUYWJsZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqICBVcGRhdGUgdGhlIGJpbGxzIHRhYmxlIGFuZCBtYWtlIG1vZGlmaWNhdGlvbnMgYXMgdXNlciBwbGF5cyBhcm91bmRcclxuICogQHBhcmFtIGJpbGxUYWJsZVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQmlsbFRhYmxlKGJpbGxUYWJsZSkge1xyXG5cclxuICAgIC8vIHJlbW92ZSBhbGwgdGhlIGl0ZW1zIGZyb20gdGhlIHRhYmxlXHJcbiAgICBiaWxsVGFibGUucm93cygpLnJlbW92ZSgpLmRyYXcoKTtcclxuXHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcblxyXG4gICAgICAgIGJpbGxUYWJsZS5yb3cuYWRkKFtcclxuICAgICAgICAgICAgaXRlbS5pdGVtX25hbWUsXHJcbiAgICAgICAgICAgIGA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20gdGV4dC1yaWdodFwiIHZhbHVlPVwiMVwiPmAsXHJcbiAgICAgICAgICAgIGA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20gdGV4dC1yaWdodFwiIHBsYWNlaG9sZGVyPVwiJHtpdGVtLnN0b2NrX3ByaWNlfVwiIHZhbHVlPVwiJHtpdGVtLnN0b2NrX3ByaWNlfVwiPmAsXHJcbiAgICAgICAgICAgIGA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20gdGV4dC1yaWdodFwiIHZhbHVlPVwiXCI+YCxcclxuICAgICAgICAgICAgYDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi13YXJuaW5nIGJ0bl9yZW1vdmVfc2VsZWN0ZWRfaXRlbVwiIGRhdGEtaWQ9XCIke2l0ZW0uaWR9XCI+UmVtb3ZlPC9idXR0b24+YFxyXG4gICAgICAgIF0pLmRyYXcoKTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJChcIi5idG5fcmVtb3ZlX3NlbGVjdGVkX2l0ZW1cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaWQ6IFwiICsgaWQpO1xyXG5cclxuICAgICAgICBzZWxlY3RlZEl0ZW1zID0gc2VsZWN0ZWRJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5pZCAhPT0gaWQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkSXRlbXMpO1xyXG5cclxuICAgICAgICB1cGRhdGVCaWxsVGFibGUoYmlsbFRhYmxlKTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG59XHJcblxyXG5cclxubGV0IHNlbGVjdGVkSXRlbXMgPSBbXTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGxldCBkVFNlYXJjaEl0ZW1zID0gJChcIiNkdF9zZWFyY2hfYmlsbF9pdGVtc1wiKS5EYXRhVGFibGUoe1xyXG4gICAgICAgIFwiY29sdW1uRGVmc1wiOiBbXHJcbiAgICAgICAgICAgIHtjbGFzc05hbWU6IFwidGV4dC1yaWdodCBhbGlnbi1taWRkbGVcIiwgXCJ0YXJnZXRzXCI6IFwiX2FsbFwifVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBkVEJpbGxJdGVtcyA9ICQoXCIjZHRfYmlsbF9pdGVtc1wiKS5EYXRhVGFibGUoe1xyXG4gICAgICAgIFwiY29sdW1uRGVmc1wiOiBbXHJcbiAgICAgICAgICAgIHtjbGFzc05hbWU6IFwidGV4dC1yaWdodCBhbGlnbi1taWRkbGVcIiwgXCJ0YXJnZXRzXCI6IFwiX2FsbFwifVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBzaG93SXRlbVNlbGVjdE1vZGFsKCk7XHJcbiAgICBzZWFyY2hGb3JJdGVtcyhkVFNlYXJjaEl0ZW1zLCBkVEJpbGxJdGVtcyk7XHJcbn0pOyJdfQ==